(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[39],{3573:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/terminal/docs/core-concepts",function(){return n(6706)}])},7192:function(e,t){"use strict";t.Z={src:"/_next/static/media/turbo-engine-first-run.56899855.png",height:654,width:1742,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAIAAAAhqtkfAAAAU0lEQVR42mMwM7bS1zQzMbQy0rRUEJfXkFWXEpGUk1JmcLB0NNNzcLT2sNF3czJxtNezM1MzsjC0ZTDTN9FQ0jXVM9VRMZDnF5fjF5EUFObnZgMA7jEMPfJ3KHMAAAAASUVORK5CYII=",blurWidth:8,blurHeight:3}},1458:function(e,t){"use strict";t.Z={src:"/_next/static/media/turbo-engine-second-run.f9aacfd9.png",height:654,width:1742,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAIAAAAhqtkfAAAAU0lEQVR42mNQVVORlpVRVVdXkJNTlFTSkFGXEpGUk1JmMDO1NtSxtrRwttBxdDJxtNezM1MzsjC0ZbAwMNVS1jfXN9dVNZLjk5DjF5EUFObnZgMArjELRSXmEvUAAAAASUVORK5CYII=",blurWidth:8,blurHeight:3}},6706:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m.ZP}});var o,r=n(6042),i=n(9396),a=n(5893),s=n(6871),d=n(6033),c=(n(8658),n(1151)),l=n(1608),p=n.n(l),u=n(7192),h=n(1458),m=n(1005),f={filePath:"pages/terminal/docs/core-concepts.mdx",route:"/terminal/docs/core-concepts",frontMatter:{title:"Core Concepts",description:"Learn about the innovative architecture that powers Turbopack's speed improvements."},pageMap:[{kind:"Meta",data:{"*":{type:"page"},index:{display:"hidden",theme:{layout:"raw",sidebar:!1,toc:!0}},terminal:"OpenBB Terminal",sdk:"OpenBB SDK",blog:{title:"Blog",href:"https://openbb.co/blog",newWindow:!0},showcase:{title:"Showcase",href:"https://openbb.co/products/sdk",newWindow:!0},confirm:{title:"Confirm",display:"hidden"},terms:{title:"Terms of Service",display:"hidden"},privacy:{title:"Privacy Policy",display:"hidden"}}},{kind:"MdxPage",name:"blog",route:"/blog",frontMatter:{description:"The latest updates and releases from the Turbo team at Vercel.",type:"posts"}},{kind:"MdxPage",name:"confirm",route:"/confirm",frontMatter:{headeronly:!0,searchable:!1}},{kind:"MdxPage",name:"index",route:"/",frontMatter:{description:"Turbo is an incremental bundler and build system optimized for JavaScript and TypeScript, written in Rust."}},{kind:"MdxPage",name:"privacy",route:"/privacy",frontMatter:{description:"See our privacy policy and how it relates to you.",hidden:!0,headeronly:!0,container:!0,searchable:!1}},{kind:"Folder",name:"sdk",route:"/sdk",children:[{kind:"Meta",data:{index:{type:"page",display:"hidden",theme:{layout:"raw",sidebar:!1,toc:!0}},docs:{title:"Docs",display:"children"}}},{kind:"Folder",name:"docs",route:"/sdk/docs",children:[{kind:"Meta",data:{index:"Quickstart","getting-started":"Getting Started","why-turbopack":"Why OpenBB SDK?","core-concepts":"Core Concepts",roadmap:"Roadmap",features:"Features",comparisons:"Comparisons"}},{kind:"Folder",name:"comparisons",route:"/sdk/docs/comparisons",children:[{kind:"Meta",data:{"turbopack-vs-vite":"OpenBB SDK vs yfinance","turbopack-vs-webpack":"OpenBB SDK vs vnpy"}},{kind:"MdxPage",name:"turbopack-vs-vite",route:"/sdk/docs/comparisons/turbopack-vs-vite",frontMatter:{title:"Turbopack vs. Vite",description:"Compare Turbopack vs. Vite"}},{kind:"MdxPage",name:"turbopack-vs-webpack",route:"/sdk/docs/comparisons/turbopack-vs-webpack",frontMatter:{title:"Turbopack vs. Webpack",description:"Compare Turbopack vs. Webpack"}}]},{kind:"MdxPage",name:"core-concepts",route:"/sdk/docs/core-concepts",frontMatter:{title:"Core Concepts",description:"Learn about the innovative architecture that powers Turbopack's speed improvements."}},{kind:"Folder",name:"features",route:"/sdk/docs/features",children:[{kind:"Meta",data:{stocks:"Stocks"}},{kind:"MdxPage",name:"stocks",route:"/sdk/docs/features/stocks"}]},{kind:"MdxPage",name:"features",route:"/sdk/docs/features",frontMatter:{title:"Features",description:"Learn about Turbopack's supported features"}},{kind:"Folder",name:"getting-started",route:"/sdk/docs/getting-started",children:[{kind:"Meta",data:{"add-to-project":"Installation","create-new":"Import","existing-monorepo":"First commands"}},{kind:"MdxPage",name:"add-to-project",route:"/sdk/docs/getting-started/add-to-project"},{kind:"MdxPage",name:"create-new",route:"/sdk/docs/getting-started/create-new",frontMatter:{title:"Getting Started with Turborepo",description:"Create your first monorepo or add Turborepo to an existing project."}},{kind:"MdxPage",name:"existing-monorepo",route:"/sdk/docs/getting-started/existing-monorepo",frontMatter:{title:"Getting Started with Turborepo",description:"Create your first monorepo or add Turborepo to an existing project."}}]},{kind:"MdxPage",name:"index",route:"/sdk/docs",frontMatter:{title:"Turbopack Quickstart",description:"Start Building Web Applications with Turbopack"}},{kind:"MdxPage",name:"roadmap",route:"/sdk/docs/roadmap"},{kind:"MdxPage",name:"why-turbopack",route:"/sdk/docs/why-turbopack",frontMatter:{title:"Why OpenBB SDK?",description:"Learn why we think Turbopack is the future of bundling for the web."}}]},{kind:"MdxPage",name:"index",route:"/sdk",frontMatter:{overrideTitle:"Turbopack - The successor to Webpack",description:"Turbopack is an incremental bundler optimized for JavaScript and TypeScript, written in Rust."}}]},{kind:"MdxPage",name:"showcase",route:"/showcase",frontMatter:{headeronly:!0,searchable:!1,description:"Turborepo by Vercel is the one of the fastest growing build systems in the frontend ecosystem. It's trusted by thousands of developers in production including teams at Vercel, AWS, Netflix, Microsoft, Disney, and more."}},{kind:"Folder",name:"terminal",route:"/terminal",children:[{kind:"Meta",data:{index:{type:"page",display:"hidden",theme:{layout:"raw",sidebar:!1,toc:!0}},docs:{title:"Docs",display:"children"}}},{kind:"Folder",name:"docs",route:"/terminal/docs",children:[{kind:"Meta",data:{index:"Quickstart","getting-started":"Getting Started","why-turbopack":"Why OpenBB Terminal?","core-concepts":"Core Concepts",roadmap:"Roadmap",features:"Features",comparisons:"Comparisons"}},{kind:"Folder",name:"comparisons",route:"/terminal/docs/comparisons",children:[{kind:"Meta",data:{"turbopack-vs-vite":"OpenBB Terminal vs Bloomberg Terminal","turbopack-vs-webpack":"OpenBB Terminal vs Yahoo Finance","turbopack-vs-webpack2":"OpenBB Terminal vs Refinitiv"}},{kind:"MdxPage",name:"turbopack-vs-vite",route:"/terminal/docs/comparisons/turbopack-vs-vite",frontMatter:{title:"Turbopack vs. Vite",description:"Compare Turbopack vs. Vite"}},{kind:"MdxPage",name:"turbopack-vs-webpack",route:"/terminal/docs/comparisons/turbopack-vs-webpack",frontMatter:{title:"Turbopack vs. Webpack",description:"Compare Turbopack vs. Webpack"}}]},{kind:"MdxPage",name:"core-concepts",route:"/terminal/docs/core-concepts",frontMatter:{title:"Core Concepts",description:"Learn about the innovative architecture that powers Turbopack's speed improvements."}},{kind:"Folder",name:"features",route:"/terminal/docs/features",children:[{kind:"Meta",data:{stocks:"Stocks"}},{kind:"MdxPage",name:"stocks",route:"/terminal/docs/features/stocks"}]},{kind:"MdxPage",name:"features",route:"/terminal/docs/features",frontMatter:{title:"Features",description:"Learn about Turbopack's supported features"}},{kind:"Folder",name:"getting-started",route:"/terminal/docs/getting-started",children:[{kind:"Meta",data:{"add-to-project":"Installation","create-new":"Import","existing-monorepo":"First commands"}},{kind:"MdxPage",name:"add-to-project",route:"/terminal/docs/getting-started/add-to-project"},{kind:"MdxPage",name:"create-new",route:"/terminal/docs/getting-started/create-new",frontMatter:{title:"Getting Started with Turborepo",description:"Create your first monorepo or add Turborepo to an existing project."}},{kind:"MdxPage",name:"existing-monorepo",route:"/terminal/docs/getting-started/existing-monorepo",frontMatter:{title:"Getting Started with Turborepo",description:"Create your first monorepo or add Turborepo to an existing project."}}]},{kind:"MdxPage",name:"index",route:"/terminal/docs",frontMatter:{title:"Turbopack Quickstart",description:"Start Building Web Applications with Turbopack"}},{kind:"MdxPage",name:"roadmap",route:"/terminal/docs/roadmap"},{kind:"MdxPage",name:"why-turbopack",route:"/terminal/docs/why-turbopack",frontMatter:{title:"Why OpenBB SDK?",description:"Learn why we think Turbopack is the future of bundling for the web."}}]},{kind:"MdxPage",name:"index",route:"/terminal",frontMatter:{description:"Turborepo is a high-performance build system for JavaScript and TypeScript codebases."}}]},{kind:"MdxPage",name:"terms",route:"/terms",frontMatter:{description:"See our terms of our service and how they relate to you.",hidden:!0,headeronly:!0,container:!0,searchable:!1}}],headings:[{type:"heading",depth:1,children:[{type:"text",value:"Core Concepts",position:{start:{line:2,column:3,offset:3},end:{line:2,column:16,offset:16}}}],position:{start:{line:2,column:1,offset:1},end:{line:2,column:16,offset:16}},value:"Core Concepts"},{type:"heading",depth:2,children:[{type:"text",value:"The Turbo engine",position:{start:{line:6,column:4,offset:102},end:{line:6,column:20,offset:118}}}],position:{start:{line:6,column:1,offset:99},end:{line:6,column:20,offset:118}},value:"The Turbo engine"},{type:"heading",depth:3,children:[{type:"text",value:"Function-level caching",position:{start:{line:10,column:5,offset:282},end:{line:10,column:27,offset:304}}}],position:{start:{line:10,column:1,offset:278},end:{line:10,column:27,offset:304}},value:"Function-level caching"},{type:"heading",depth:3,children:[{type:"text",value:"The cache",position:{start:{line:30,column:5,offset:1721},end:{line:30,column:14,offset:1730}}}],position:{start:{line:30,column:1,offset:1717},end:{line:30,column:14,offset:1730}},value:"The cache"},{type:"heading",depth:3,children:[{type:"text",value:"How does it help?",position:{start:{line:36,column:5,offset:2243},end:{line:36,column:22,offset:2260}}}],position:{start:{line:36,column:1,offset:2239},end:{line:36,column:22,offset:2260}},value:"How does it help?"},{type:"heading",depth:2,children:[{type:"text",value:"Compiling by Request",position:{start:{line:42,column:4,offset:2716},end:{line:42,column:24,offset:2736}}}],position:{start:{line:42,column:1,offset:2713},end:{line:42,column:24,offset:2736}},value:"Compiling by Request"},{type:"heading",depth:3,children:[{type:"text",value:"Page-level compilation",position:{start:{line:48,column:5,offset:3153},end:{line:48,column:27,offset:3175}}}],position:{start:{line:48,column:1,offset:3149},end:{line:48,column:27,offset:3175}},value:"Page-level compilation"},{type:"heading",depth:3,children:[{type:"text",value:"Request-level compilation",position:{start:{line:54,column:5,offset:3662},end:{line:54,column:30,offset:3687}}}],position:{start:{line:54,column:1,offset:3658},end:{line:54,column:30,offset:3687}},value:"Request-level compilation"}],unstable_flexsearch:!0};globalThis.__nextra_internal__={pageMap:f.pageMap,route:f.route};function g(e){var t=Object.assign({h1:"h1",p:"p",h2:"h2",h3:"h3",strong:"strong",code:"code",em:"em",a:"a"},(0,c.ah)(),e.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h1,{children:"Core Concepts"}),"\n",(0,a.jsx)(t.p,{children:"Let\u2019s dive deep into the internals of Turbopack to figure out why it\u2019s so fast."}),"\n",(0,a.jsx)(t.h2,{id:"the-turbo-engine",children:"The Turbo engine"}),"\n",(0,a.jsx)(t.p,{children:"Turbopack is so fast because it\u2019s built on a reusable library for Rust which enables incremental computation known as the Turbo engine. Here\u2019s how it works:"}),"\n",(0,a.jsx)(t.h3,{id:"function-level-caching",children:"Function-level caching"}),"\n",(0,a.jsxs)(t.p,{children:["In a Turbo engine-powered program, you can mark certain functions as \u2018to be remembered\u2019. When these functions are called, the Turbo engine will remember ",(0,a.jsx)(t.strong,{children:"what they were called with"}),", and ",(0,a.jsx)(t.strong,{children:"what they returned"}),". It\u2019ll then save it in an in-memory cache."]}),"\n",(0,a.jsx)(t.p,{children:"Here\u2019s a simplified example of what this might look like in a bundler:"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(p(),{placeholder:"blur",src:u.Z})}),"\n",(0,a.jsxs)(t.p,{children:["We start with calling ",(0,a.jsx)(t.code,{children:"readFile"})," on two files, ",(0,a.jsx)(t.code,{children:"api.ts"})," and ",(0,a.jsx)(t.code,{children:"sdk.ts"}),". We then ",(0,a.jsx)(t.code,{children:"bundle"})," those files, ",(0,a.jsx)(t.code,{children:"concat"})," them together, and end up with the ",(0,a.jsx)(t.code,{children:"fullBundle"})," at the end. The results of all of those function calls get saved in the cache for later."]}),"\n",(0,a.jsxs)(t.p,{children:["Let\u2019s imagine that we\u2019re running on a dev server. You save the ",(0,a.jsx)(t.code,{children:"sdk.ts"})," file on your machine. Turbopack receives the file system event, and knows it needs to recompute ",(0,a.jsx)(t.code,{children:'readFile("sdk.ts")'}),":"]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(p(),{placeholder:"blur",src:h.Z})}),"\n",(0,a.jsxs)(t.p,{children:["Since the result of ",(0,a.jsx)(t.code,{children:"sdk.ts"})," has changed, we need to ",(0,a.jsx)(t.code,{children:"bundle"})," it again, which then needs to be concatenated again."]}),"\n",(0,a.jsxs)(t.p,{children:["Crucially, ",(0,a.jsx)(t.code,{children:"api.ts"})," hasn\u2019t changed. We read its result from the cache and pass that to ",(0,a.jsx)(t.code,{children:"concat"})," instead. So we save time by not reading it and re-bundling it again."]}),"\n",(0,a.jsx)(t.p,{children:"Now imagine this in a real bundler, with thousands of files to read and transformations to execute. The mental model is the same. You can save enormous amounts of work by remembering the result of function calls and not re-doing work that\u2019s been done before."}),"\n",(0,a.jsx)(t.h3,{id:"the-cache",children:"The cache"}),"\n",(0,a.jsxs)(t.p,{children:["The Turbo engine currently stores its cache in memory. This means the cache will last as long as the process running it - which works well for a dev server. When you run ",(0,a.jsx)(t.code,{children:"next dev --turbo"})," in Next v13, you\u2019ll start a cache with the Turbo engine. When you cancel your dev server, the cache gets cleared."]}),"\n",(0,a.jsxs)(t.p,{children:["In the future, we\u2019re planning to persist this cache - either to the filesystem, or to a remote cache like Turborepo\u2019s. This will mean that Turbopack could remember work done ",(0,a.jsx)(t.em,{children:"across runs and machines."})]}),"\n",(0,a.jsx)(t.h3,{id:"how-does-it-help",children:"How does it help?"}),"\n",(0,a.jsx)(t.p,{children:"This approach makes Turbopack extremely fast at computing incremental updates to your apps. This optimizes Turbopack for handling updates in development, meaning your dev server will always respond snappily to changes."}),"\n",(0,a.jsxs)(t.p,{children:["In the future, a persistent cache will open the door to much faster production builds. By remembering work done ",(0,a.jsx)(t.em,{children:"across runs"}),", new production builds could only rebuild changed files - potentially leading to enormous time savings."]}),"\n",(0,a.jsx)(t.h2,{id:"compiling-by-request",children:"Compiling by Request"}),"\n",(0,a.jsxs)(t.p,{children:["The Turbo engine helps provide extremely fast ",(0,a.jsx)(t.em,{children:"updates"})," on your dev server, but there\u2019s another important metric to consider - startup time. The faster your dev server can start running, the faster you can get to work."]}),"\n",(0,a.jsxs)(t.p,{children:["There are two ways to make a process faster - work faster, or do less work. For starting up a dev server, the way to do less work is to compile ",(0,a.jsx)(t.em,{children:"only the code that\u2019s needed"})," to get started."]}),"\n",(0,a.jsx)(t.h3,{id:"page-level-compilation",children:"Page-level compilation"}),"\n",(0,a.jsxs)(t.p,{children:["Versions of Next.js from 2-3 years ago used to compile the ",(0,a.jsx)(t.em,{children:"entire application"})," before showing your dev server. In Next.js [11], we began compiling ",(0,a.jsx)(t.em,{children:"only the code on the page you requested."})]}),"\n",(0,a.jsxs)(t.p,{children:["That\u2019s better, but it\u2019s not perfect. When you navigate to ",(0,a.jsx)(t.code,{children:"/users"}),", we\u2019ll bundle all the client and server modules, dynamic-imported modules, and referenced CSS and images. That means if a large part of your page is hidden from view, or hidden behind tabs, we\u2019ll still compile it anyway."]}),"\n",(0,a.jsx)(t.h3,{id:"request-level-compilation",children:"Request-level compilation"}),"\n",(0,a.jsxs)(t.p,{children:["Turbopack is smart enough to compile ",(0,a.jsx)(t.em,{children:"only the code you request"}),". That means if a browser requests HTML, we compile only the HTML - not anything that is referenced by the HTML."]}),"\n",(0,a.jsxs)(t.p,{children:["If a browser wants some CSS, we\u2019ll compile only that - without compiling referenced images. Got a big charting library behind ",(0,a.jsx)(t.code,{children:"next/dynamic"}),"? Doesn\u2019t compile it until the tab showing the chart is shown. Turbopack even knows ",(0,a.jsx)(t.em,{children:"to not compile source maps unless your Chrome DevTools are open"}),"."]}),"\n",(0,a.jsxs)(t.p,{children:["If we were to use native ESM, we\u2019d get similar behavior. Except that Native ESM produces a ",(0,a.jsx)(t.em,{children:"lot"})," of requests to the server, as discussed in our ",(0,a.jsx)(t.a,{href:"/pack/docs/why-turbopack",children:"Why Turbopack"})," section. With request-level compilation, we get to both reduce the number of requests ",(0,a.jsx)(t.em,{children:"and"})," use native speed to compile them. As you can see in our ",(0,a.jsx)(t.a,{href:"/pack/docs/benchmarks",children:"benchmarks"}),", this provides significant performance improvements."]})]})}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},(0,c.ah)(),e.components),n=t.wrapper;return n?(0,a.jsx)(n,(0,i.Z)((0,r.Z)({},e),{children:(0,a.jsx)(g,(0,r.Z)({},e))})):g(e)}f.title="Core Concepts";(o=globalThis).__nextra_pageContext__||(o.__nextra_pageContext__=Object.create(null)),globalThis.__nextra_pageContext__["/terminal/docs/core-concepts"]={Content:function(e){return(0,a.jsx)(s.mK.Provider,{value:e,children:(0,a.jsx)(b,{})})},pageOpts:f,themeConfig:d.Z}}},function(e){e.O(0,[664,164,33,774,888,179],(function(){return t=3573,e(e.s=t);var t}));var t=e.O();_N_E=t}]);